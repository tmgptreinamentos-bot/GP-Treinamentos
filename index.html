<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SolicitaÃ§Ã£o de Cursos</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #000;
        color: #FFD700;
        margin: 0;
        padding: 15px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 28px;
    }

    /* ðŸ”¹ Caixa do formulÃ¡rio */
    .form-section {
        background: #111;
        padding: 20px;
        border-radius: 12px;
        max-width: 500px;
        margin: 0 auto 30px auto;
        border: 1px solid #FFD700;
    }

    label {
        font-size: 18px;
        margin-top: 10px;
        display: block;
    }

    input {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        margin-bottom: 12px;
        border-radius: 8px;
        border: 1px solid #FFD700;
        font-size: 18px;
    }

    /* ðŸ”¹ LISTA DE CURSOS */
    .course-list {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
    }

    /* ðŸ”¹ CARD DO CURSO */
    .course-item {
        width: 160px; /* ðŸ”¹ tamanho melhor para celular */
        background: #111;
        border: 1px solid #FFD700;
        border-radius: 12px;
        padding: 10px;
        text-align: center;
        font-size: 16px;
    }

    .course-item img {
        width: 100%;
        height: 120px;   /* ðŸ”¹ altura fixa para padronizar */
        object-fit: cover;
        border-radius: 10px;
        border: 1px solid #FFD700;
        background: #222;
    }

    /* ðŸ”¹ BOTÃƒO */
    button {
        background: #FFD700;
        color: #000;
        padding: 14px;
        border: none;
        border-radius: 10px;
        font-size: 20px;
        cursor: pointer;
        margin-top: 10px;
        width: 100%;
    }

    button:hover {
        background: #e0c000;
    }

    .success {
        margin-top: 15px;
        text-align: center;
        color: #7CFC00;
        font-size: 20px;
    }

    h2 {
        text-align: center;
        margin-top: 35px;
        margin-bottom: 20px;
    }

    /* ðŸ”¹ Ajustes para telas pequenas */
    @media (max-width: 480px) {
        .course-item {
            width: 45%;
        }
        h1 { font-size: 24px; }
    }
</style>

</head>
<body>

<h1>SolicitaÃ§Ã£o de Cursos</h1>

<div class="form-section">
    <label>Nome:</label>
    <input id="nome" type="text">

    <label>Telefone:</label>
    <input id="telefone" type="text">

    <label>E-mail:</label>
    <input id="email" type="email">

    <button onclick="enviarSolicitacao()">Solicitar Cursos Selecionados</button>

    <div id="msg" class="success"></div>
</div>

<h2>Selecione os Cursos</h2>
<div id="listaCursos" class="course-list"></div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzAQozrqKD_zwMbAZY4cPU_tpsPYVk1Wsp6Z2JM4D9o8c3tNAbgKUftaU6rmQWoIZvO/exec";

// Buscar os cursos
fetch(SCRIPT_URL + "?action=listar")
  .then(r => r.json())
  .then(cursos => {
      let container = document.getElementById("listaCursos");
      container.innerHTML = "";

      cursos.forEach(c => {
          container.innerHTML += `
              <div class="course-item">
                  <img src="${c.imagem}" onerror="this.src='https://via.placeholder.com/200x150?text=Sem+Imagem';">
                  <h3>${c.nome}</h3>
                  <input type="checkbox" value="${c.pdf}">
                  Selecionar
              </div>
          `;
      });
  });

// Enviar solicitaÃ§Ã£o
function enviarSolicitacao() {
    let nome = document.getElementById("nome").value.trim();
    let telefone = document.getElementById("telefone").value.trim();
    let email = document.getElementById("email").value.trim();

    if (!nome || !telefone || !email) {
        alert("Preencha Nome, Telefone e E-mail!");
        return;
    }

    let selecionados = [...document.querySelectorAll("input[type=checkbox]:checked")]
                          .map(x => x.value);

    if (selecionados.length === 0) {
        alert("Selecione pelo menos um curso!");
        return;
    }

    fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({
            action: "solicitar",
            nome, telefone, email,
            pdfs: selecionados
        })
    })
    .then(r => r.text())
    .then(resp => {
        document.getElementById("msg").innerText = "SolicitaÃ§Ã£o enviada com sucesso!";
    });
}
</script>

</body>
</html>
