<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Solicitação de Cursos – GP Treinamentos</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #000;
        color: #FFD700;
        margin: 0;
        padding: 0;
    }

    h1 {
        text-align: center;
        padding: 20px;
        font-size: 28px;
        font-weight: bold;
        background: #111;
        border-bottom: 2px solid #FFD700;
        margin: 0;
    }

    .form-section {
        background: #111;
        padding: 20px;
        border-radius: 10px;
        max-width: 450px;
        margin: 20px auto;
        border: 1px solid #FFD700;
    }

    label {
        font-size: 18px;
    }

    input {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        margin-bottom: 15px;
        border-radius: 8px;
        border: 1px solid #FFD700;
        background: #000;
        color: #FFD700;
        font-size: 16px;
    }

    .course-list {
        padding: 15px;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .course-item {
        width: 95%;
        max-width: 350px;
        background: #111;
        border: 2px solid #FFD700;
        border-radius: 12px;
        padding: 15px;
        text-align: center;
    }

    .course-item img {
        width: 100%;
        max-height: 200px;
        object-fit: contain;
        background: #000;
        border-radius: 8px;
        padding: 10px;
    }

    .course-item h3 {
        font-size: 20px;
        margin: 10px 0;
        font-weight: bold;
    }

    .checkbox-area {
        display: flex;
        align-items: center;
        font-size: 18px;
        margin-top: 10px;
        justify-content: center;
        gap: 10px;
    }

    .checkbox-area input {
        width: 24px;
        height: 24px;
    }

    button {
        background: #FFD700;
        color: #000;
        padding: 15px;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        width: 100%;
        margin-top: 10px;
        font-weight: bold;
    }

    button:hover {
        background: #e5c300;
    }

    .success {
        margin-top: 20px;
        text-align: center;
        color: #7CFC00;
        font-size: 20px;
        font-weight: bold;
    }
</style>
</head>

<body>

<h1>Solicitação de Cursos – GP Treinamentos</h1>

<div class="form-section">
    <label>Nome:</label>
    <input id="nome" type="text">

    <label>Telefone:</label>
    <input id="telefone" type="text">

    <label>E-mail:</label>
    <input id="email" type="email">

    <button onclick="enviarSolicitacao()">Solicitar Cursos Selecionados</button>
    <div id="msg" class="success"></div>
</div>

<h2 style="text-align:center;margin-top:20px">Selecione os Cursos</h2>

<div id="listaCursos" class="course-list"></div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzAQozrqKD_zwMbAZY4cPU_tpsPYVk1Wsp6Z2JM4D9o8c3tNAbgKUftaU6rmQWoIZvO/exec";

// Carregar cursos
fetch(SCRIPT_URL + "?action=listar")
  .then(r => r.json())
  .then(cursos => {
      let container = document.getElementById("listaCursos");
      container.innerHTML = "";

      cursos.forEach(c => {
          container.innerHTML += `
              <div class="course-item">
                  <img src="${c.imagem}">
                  <h3>${c.nome}</h3>

                  <div class="checkbox-area">
                     <input type="checkbox" value="${c.pdf}">
                     Selecionar
                  </div>
              </div>
          `;
      });
  });

// Enviar solicitação
function enviarSolicitacao() {
    let nome = document.getElementById("nome").value.trim();
    let telefone = document.getElementById("telefone").value.trim();
    let email = document.getElementById("email").value.trim();

    if (!nome || !telefone || !email) {
        alert("Preencha Nome, Telefone e E-mail antes de solicitar!");
        return;
    }

    let selecionados = [...document.querySelectorAll("input[type=checkbox]:checked")].map(x => x.value);

    if (selecionados.length === 0) {
        alert("Selecione pelo menos um curso!");
        return;
    }

    fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({
            action: "solicitar",
            nome, telefone, email,
            pdfs: selecionados
        })
    })
    .then(r => r.text())
    .then(resp => {
        document.getElementById("msg").innerText = "Solicitação enviada com sucesso!";
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
}
</script>

</body>
</html>
