<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GP Treinamentos</title>

<style>
/* ============================
       TEMA PRETO E DOURADO
   ============================ */
:root {
    --bg1: #000000;
    --bg2: #2b2b2b;
    --card-bg: #111111;
    --text: #ffffff;
    --gold: #d4af37;
    --border: #3a3a3a;
}

/* Fundo com gradiente */
body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(180deg, var(--bg1), var(--bg2));
    color: var(--text);
    padding: 20px;
}

/* Área central */
.container {
    max-width: 900px;
    margin: auto;
}

/* Título */
h1 {
    text-align: center;
    color: var(--gold);
    font-size: 28px;
    margin-bottom: 25px;
}

/* ============================
       CARD DO FORMULÁRIO
   ============================ */
.card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 14px;
    border: 1px solid var(--border);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
    margin-bottom: 40px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-size: 15px;
    font-weight: bold;
    color: var(--gold);
}

input {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 15px;
    border: 1px solid var(--border);
    background: #222;
    color: var(--text);
    font-size: 16px;
}

/* Botão principal */
button {
    width: 100%;
    padding: 14px;
    border: none;
    background: var(--gold);
    color: #000;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}
button:hover {
    opacity: 0.85;
}

/* ============================
       LISTA DE CURSOS
   ============================ */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
}

.item {
    background: var(--card-bg);
    padding: 10px;
    border-radius: 12px;
    border: 1px solid var(--border);
    text-align: center;
    position: relative;
}

/* Imagem do curso */
.item img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 10px;
    border: 1px solid var(--border);
}

/* Checkbox no canto */
.item input[type="checkbox"] {
    position: absolute;
    right: 8px;
    top: 8px;
    transform: scale(1.4);
}

/* Botão de solicitar */
#btnSolicitar {
    margin-top: 30px;
    background: var(--gold);
    color: #000;
    font-size: 20px;
    padding: 15px;
    border-radius: 12px;
}
</style>
</head>

<body>
<div class="container">

    <h1>GP Treinamentos</h1>

    <!-- FORMULÁRIO -->
    <div class="card">
        <label>Nome:</label>
        <input type="text" id="nome" placeholder="Seu nome">

        <label>Telefone:</label>
        <input type="text" id="telefone" placeholder="Seu telefone">

        <label>E-mail:</label>
        <input type="email" id="email" placeholder="Seu e-mail">

        <button onclick="salvarDados()">Entrar</button>
    </div>

    <!-- LISTA DINÂMICA -->
    <div class="grid" id="listaCursos"></div>

    <!-- Botão de solicitar PDFs -->
    <button id="btnSolicitar" onclick="solicitarPDFs()">Solicitar Selecionados</button>

</div>

<script>
/* CARREGAR CURSOS DA PLANILHA */
async function carregarCursos() {
    const url = "https://script.google.com/macros/s/AKfycbzAQozrqKD_zwMbAZY4cPU_tpsPYVk1Wsp6Z2JM4D9o8c3tNAbgKUftaU6rmQWoIZvO/exec";

    let dados = await fetch(url);
    let cursos = await dados.json();

    let div = document.getElementById("listaCursos");
    div.innerHTML = "";

    cursos.forEach(c => {
        // Converte imagem drive → lh3.google...
        let img = c.imagem.replace(
            "https://drive.google.com/uc?export=view&id=",
            "https://lh3.googleusercontent.com/d/"
        ) + "=s1000";

        div.innerHTML += `
            <div class="item">
                <input type="checkbox" value="${c.PDF}">
                <img src="${img}" alt="Imagem do curso">
            </div>
        `;
    });
}

/* SALVAR DADOS LOCALMENTE */
function salvarDados() {
    localStorage.setItem("nome", document.getElementById("nome").value);
    localStorage.setItem("telefone", document.getElementById("telefone").value);
    localStorage.setItem("email", document.getElementById("email").value);

    alert("Dados salvos! Agora selecione os treinamentos.");
}

/* SOLICITAR PDFs SELECIONADOS */
function solicitarPDFs() {
    let nome = localStorage.getItem("nome");
    let email = localStorage.getItem("email");

    if (!nome || !email) {
        alert("Preencha nome e e-mail antes de solicitar os PDFs.");
        return;
    }

    // coleta os PDFs selecionados
    let selecionados = [...document.querySelectorAll("input[type=checkbox]:checked")].map(c => c.value);

    if (selecionados.length === 0) {
        alert("Selecione ao menos um treinamento.");
        return;
    }

    // Envia para o Apps Script
    fetch("https://script.google.com/macros/s/AKfycbzAQozrqKD_zwMbAZY4cPU_tpsPYVk1Wsp6Z2JM4D9o8c3tNAbgKUftaU6rmQWoIZvO/exec", {
        method: "POST",
        body: JSON.stringify({
            nome: nome,
            email: email,
            pdfs: selecionados
        })
    });

    alert("Solicitação enviada! Os PDFs chegarão no seu e-mail.");
}

carregarCursos();
</script>

</body>
</html>
